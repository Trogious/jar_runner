<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1353" height="1236" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[note left of User: 1st time login
User->Browser: login
Browser->API Gateway: user & password
API Gateway->Lambda auth: authenticate
Lambda auth->Cognito: verify credentials
Cognito-->Lambda auth: Session
Lambda auth-->API Gateway: Session
API Gateway-->Browser: Session
Browser-->User: password change required
User->Browser: change password
Browser->API Gateway: user, new password & Session
API Gateway->Lambda newpass: user, new password & Session
Lambda newpass->Cognito: change password
Cognito-->Lambda newpass: IdToken
Lambda newpass-->API Gateway: IdToken
API Gateway-->Browser: IdToken
Browser-->User: logged in
note left of User: 2nd+ time login
User->Browser: login
Browser->API Gateway: user & password
API Gateway->Lambda auth: authenticate
Lambda auth->Cognito: verify credentials
Cognito-->Lambda auth: IdToken
Lambda auth-->API Gateway: IdToken
API Gateway-->Browser: IdToken
Browser-->User: logged in]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><path d="M150,20C177.1,17.4 192.1,22.6 216.0,20.0C214.2,54.3 217.8,53.4 216.0,64.0C178.3,61.4 203.7,66.6 150.0,64.0C151.8,30.6 148.2,53.4 150.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="160" y="47" style="font-size: 16px; font-family: danielbd;"><tspan x="160">User</tspan></text></g><g class="actor"><path d="M150,1172C173.8,1174.6 186.6,1169.4 216.0,1172.0C217.8,1181.2 214.2,1209.0 216.0,1216.0C165.8,1213.4 176.9,1218.6 150.0,1216.0C151.8,1199.2 148.2,1188.1 150.0,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="160" y="1199" style="font-size: 16px; font-family: danielbd;"><tspan x="160">User</tspan></text></g><path d="M183.0,64.0C138.7,649.5 227.3,983.7 183.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M389,20C476.4,15.8 435.4,24.2 493.0,20.0C491.2,34.5 494.8,49.6 493.0,64.0C405.6,59.8 473.0,68.2 389.0,64.0C387.2,57.0 390.8,39.0 389.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="399" y="47.5" style="font-size: 16px; font-family: danielbd;"><tspan x="399">Browser</tspan></text></g><g class="actor"><path d="M389,1172C476.4,1176.2 457.7,1167.8 493.0,1172.0C491.2,1192.4 494.8,1191.5 493.0,1216.0C427.8,1211.8 463.5,1220.2 389.0,1216.0C387.2,1191.6 390.8,1189.2 389.0,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="399" y="1199.5" style="font-size: 16px; font-family: danielbd;"><tspan x="399">Browser</tspan></text></g><path d="M441.0,64.0C485.3,661.3 396.7,329.9 441.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M658,20C775.6,25.6 704.7,14.4 798.0,20.0C799.8,57.0 796.2,53.4 798.0,64.0C686.7,69.6 769.3,58.4 658.0,64.0C659.8,44.4 656.2,27.0 658.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="668" y="45" style="font-size: 16px; font-family: danielbd;"><tspan x="668">API Gateway</tspan></text></g><g class="actor"><path d="M658,1172C757.4,1177.6 680.4,1166.4 798.0,1172.0C799.8,1205.4 796.2,1209.0 798.0,1216.0C684.2,1210.4 691.6,1221.6 658.0,1216.0C656.2,1182.6 659.8,1197.9 658.0,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="668" y="1197" style="font-size: 16px; font-family: danielbd;"><tspan x="668">API Gateway</tspan></text></g><path d="M728.0,64.0C683.7,633.2 772.3,524.5 728.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M818,20C840.7,25.7 852.1,14.3 960.0,20.0C961.8,34.4 958.2,30.6 960.0,64.0C878.0,58.3 937.3,69.7 818.0,64.0C819.8,40.4 816.2,41.8 818.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="828" y="48" style="font-size: 16px; font-family: danielbd;"><tspan x="828">Lambda auth</tspan></text></g><g class="actor"><path d="M818,1172C907.1,1166.3 925.9,1177.7 960.0,1172.0C958.2,1205.4 961.8,1182.6 960.0,1216.0C871.8,1221.7 937.3,1210.3 818.0,1216.0C819.8,1181.8 816.2,1190.0 818.0,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="828" y="1200" style="font-size: 16px; font-family: danielbd;"><tspan x="828">Lambda auth</tspan></text></g><path d="M889.0,64.0C933.3,861.8 844.7,371.6 889.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M1021.5,20C1069.9,16.4 1035.7,23.6 1110.5,20.0C1108.7,31.6 1112.3,27.0 1110.5,64.0C1050.1,60.4 1057.2,67.6 1021.5,64.0C1019.7,57.0 1023.3,47.5 1021.5,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="1031.5" y="44.5" style="font-size: 16px; font-family: danielbd;"><tspan x="1031.5">Cognito</tspan></text></g><g class="actor"><path d="M1021.5,1172C1089.1,1175.6 1080.4,1168.4 1110.5,1172.0C1108.7,1200.4 1112.3,1199.5 1110.5,1216.0C1078.6,1212.4 1066.7,1219.6 1021.5,1216.0C1023.3,1206.0 1019.7,1179.0 1021.5,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="1031.5" y="1196.5" style="font-size: 16px; font-family: danielbd;"><tspan x="1031.5">Cognito</tspan></text></g><path d="M1066.0,64.0C1110.3,605.8 1021.7,329.9 1066.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M1151,20C1213.8,26.9 1219.2,13.1 1323.0,20.0C1321.2,53.4 1324.8,32.6 1323.0,64.0C1295.5,70.9 1217.4,57.1 1151.0,64.0C1149.2,34.1 1152.8,49.9 1151.0,20.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="1161" y="45.5" style="font-size: 16px; font-family: danielbd;"><tspan x="1161">Lambda newpass</tspan></text></g><g class="actor"><path d="M1151,1172C1237.0,1165.1 1295.5,1178.9 1323.0,1172.0C1324.8,1209.0 1321.2,1179.0 1323.0,1216.0C1227.3,1209.1 1192.3,1222.9 1151.0,1216.0C1149.2,1205.4 1152.8,1198.8 1151.0,1172.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="1161" y="1197.5" style="font-size: 16px; font-family: danielbd;"><tspan x="1161">Lambda newpass</tspan></text></g><path d="M1237.0,64.0C1281.3,878.7 1192.7,755.9 1237.0,1172.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="note"><path d="M40,84C59.7,88.9 136.0,79.1 163.0,84.0C164.4,101.5 161.6,89.4 163.0,118.0C69.5,122.9 59.7,113.1 40.0,118.0C38.6,111.9 41.4,96.0 40.0,84.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="45" y="104" style="font-size: 16px; font-family: danielbd;"><tspan x="45">1st time login</tspan></text></g><g class="signal"><text x="293.5" y="146" style="font-size: 16px; font-family: danielbd;"><tspan x="293.5">login</tspan></text><path d="M183.0,162.0C224.3,151.7 374.3,172.3 441.0,162.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="507.5" y="190.5" style="font-size: 16px; font-family: danielbd;"><tspan x="507.5">user &amp; password</tspan></text><path d="M441.0,205.0C486.9,216.5 509.9,193.5 728.0,205.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="754.5" y="236" style="font-size: 16px; font-family: danielbd;"><tspan x="754.5">authenticate</tspan></text><path d="M728.0,243.0C789.4,249.4 795.5,236.6 889.0,243.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="899" y="271" style="font-size: 16px; font-family: danielbd;"><tspan x="899">verify credentials</tspan></text><path d="M889.0,287.0C949.1,279.9 931.5,294.1 1066.0,287.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="948" y="317" style="font-size: 16px; font-family: danielbd;"><tspan x="948">Session</tspan></text><path d="M1066.0,323.0C931.5,330.1 970.4,315.9 889.0,323.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="779" y="353" style="font-size: 16px; font-family: danielbd;"><tspan x="779">Session</tspan></text><path d="M889.0,359.0C850.4,365.4 803.6,352.6 728.0,359.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="555" y="389" style="font-size: 16px; font-family: danielbd;"><tspan x="555">Session</tspan></text><path d="M728.0,395.0C682.1,383.5 486.9,406.5 441.0,395.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="193" y="423" style="font-size: 16px; font-family: danielbd;"><tspan x="193">password change required</tspan></text><path d="M441.0,439.0C244.9,449.3 224.3,428.7 183.0,439.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="236.5" y="467" style="font-size: 16px; font-family: danielbd;"><tspan x="236.5">change password</tspan></text><path d="M183.0,483.0C267.1,472.7 280.4,493.3 441.0,483.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="451" y="511.5" style="font-size: 16px; font-family: danielbd;"><tspan x="451">user, new password &amp; Session</tspan></text><path d="M441.0,526.0C486.9,514.5 625.4,537.5 728.0,526.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="849" y="554.5" style="font-size: 16px; font-family: danielbd;"><tspan x="849">user, new password &amp; Session</tspan></text><path d="M728.0,569.0C850.2,548.6 809.4,589.4 1237.0,569.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="1076" y="597" style="font-size: 16px; font-family: danielbd;"><tspan x="1076">change password</tspan></text><path d="M1237.0,613.0C1093.4,619.8 1199.8,606.2 1066.0,613.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="1116.5" y="644" style="font-size: 16px; font-family: danielbd;"><tspan x="1116.5">IdToken</tspan></text><path d="M1066.0,651.0C1139.2,644.2 1107.0,657.8 1237.0,651.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="947.5" y="682" style="font-size: 16px; font-family: danielbd;"><tspan x="947.5">IdToken</tspan></text><path d="M1237.0,689.0C850.2,668.6 921.5,709.4 728.0,689.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="549.5" y="720" style="font-size: 16px; font-family: danielbd;"><tspan x="549.5">IdToken</tspan></text><path d="M728.0,727.0C669.8,738.5 501.2,715.5 441.0,727.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="275" y="755" style="font-size: 16px; font-family: danielbd;"><tspan x="275">logged in</tspan></text><path d="M441.0,771.0C347.1,760.7 224.3,781.3 183.0,771.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M20,791C54.9,796.7 86.4,785.3 163.0,791.0C161.6,801.5 164.4,814.2 163.0,825.0C128.7,830.7 75.8,819.3 20.0,825.0C21.4,814.1 18.6,805.8 20.0,791.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="25" y="811" style="font-size: 16px; font-family: danielbd;"><tspan x="25">2nd+ time login</tspan></text></g><g class="signal"><text x="293.5" y="853" style="font-size: 16px; font-family: danielbd;"><tspan x="293.5">login</tspan></text><path d="M183.0,869.0C399.7,879.3 339.6,858.7 441.0,869.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="507.5" y="897.5" style="font-size: 16px; font-family: danielbd;"><tspan x="507.5">user &amp; password</tspan></text><path d="M441.0,912.0C632.0,923.5 486.9,900.5 728.0,912.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="754.5" y="943" style="font-size: 16px; font-family: danielbd;"><tspan x="754.5">authenticate</tspan></text><path d="M728.0,950.0C842.2,943.6 863.2,956.4 889.0,950.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="899" y="978" style="font-size: 16px; font-family: danielbd;"><tspan x="899">verify credentials</tspan></text><path d="M889.0,994.0C1037.7,1001.1 988.8,986.9 1066.0,994.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="942.5" y="1025" style="font-size: 16px; font-family: danielbd;"><tspan x="942.5">IdToken</tspan></text><path d="M1066.0,1032.0C1009.9,1039.1 917.3,1024.9 889.0,1032.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="773.5" y="1063" style="font-size: 16px; font-family: danielbd;"><tspan x="773.5">IdToken</tspan></text><path d="M889.0,1070.0C753.8,1063.6 772.7,1076.4 728.0,1070.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="549.5" y="1101" style="font-size: 16px; font-family: danielbd;"><tspan x="549.5">IdToken</tspan></text><path d="M728.0,1108.0C682.1,1119.5 537.9,1096.5 441.0,1108.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="275" y="1136" style="font-size: 16px; font-family: danielbd;"><tspan x="275">logged in</tspan></text><path d="M441.0,1152.0C399.7,1141.7 251.3,1162.3 183.0,1152.0" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g></svg>
